<!DOCTYPE html>
<html>
  <head>
    <title>Test Mixed Content Blocking</title>
    <link rel="stylesheet" type="text/css" href="http://cosmin-malutan.github.io/testcase-data/firefox/security/mixed_content_blocked/style/style.css" />
    <style>
    .test {
      color: #080;
      margin: 1em;
      padding: 1em;
      border: 1px solid #080;
      border-radius: 5px;
    }
    .fail {
      border-color: red;
      color: red;
    }
    iframe {
      vertical-align: middle;
      border-radius: 5px;
      border-width: 1px;
    }
    </style>
  </head>
  <body onload="runTests();>
    <div class="test">
      Secure iframe:
      <iframe id="frame" src="iframe.html"></iframe>
    </div>

    <div class="test">
      Insecure script 1: <span id="result1">did not load</span>
    </div>

    <div class="test">
      Insecure script 2: <span id="result2">did not load</span>
    </div>

    <div id="plugintest" class="test">
      Insecure plugin content: <span id="result3">did not load</span>
    </div>

    <div class="test">
      Insecure stylesheet: <span id="result4">did not load</span>
      <span id="styletest">test</span>
    </div>

    <pre id="log"></pre>
    <script>
      function log(s) {
        var log = document.getElementById("log");
        log.textContent = log.textContent + s + "\n";
      }

      // Test 4:
      // check if the insecure stylesheet loaded
      log("Checking insecure stylesheet status");
      var t = document.getElementById("styletest");
      var c = window.getComputedStyle(t, null);
      if (c.getPropertyValue("color") == "rgb(255, 0, 0)") {
        var r = document.getElementById("result4");
        r.textContent = "LOADED";
        r.parentElement.className = "test fail";
      }
    </script>
  </body>
</html>
